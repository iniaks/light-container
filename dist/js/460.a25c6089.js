"use strict";(self["webpackChunklight_container"]=self["webpackChunklight_container"]||[]).push([[460],{460:function(t,i,o){o.r(i),o.d(i,{default:function(){return p}});var e=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"reading-container"},[t.book?o("div",{staticClass:"reading-context"},[o("h2",[t._v(t._s(t.book.title))]),o("button",{staticStyle:{"margin-right":"10px"},on:{click:function(i){return t.learn(.1)}}},[t._v("学习")]),o("button",{on:{click:t.complete}},[t._v("全显")]),o("p",{staticClass:"reading-paragraph"},t._l(t.book_map,(function(i,e){return o("span",{key:"word-"+e,staticClass:"reading-word",style:{borderBottomColor:i.isHide?"#333":"transparent",display:i.isWrap?"block":"inline-block"}},[i.isWrap?t._e():o("span",{class:[i.isHide?"hide":""]},[t._v(t._s(i.char))])])})),0)]):t._e()])},a=[],s=o(669),n=o.n(s),r=o(71),h={data(){return{book:null,book_map:[]}},methods:{generate(){const t=this;this.book.content.forEach(((i,o)=>{for(let e=0;e<i.length;e++)t.book_map.push({char:i[e],cindex:e,para:o,isChar:/[\u4E00-\u9FA5]/.test(i[e]),isWrap:!1,isHide:!1,context:""});t.book_map.push({char:"",cindex:i.length,para:o,isChar:!1,isWrap:!0,isHide:!1,context:""})}))},init(){const t=this;n().get(`${r.H}/reading/book?addr=${this.$route.query.addr}`).then((i=>{t.book=i.data,t.generate()})).catch((t=>t))},random(t,i){return Math.floor(Math.random()*(i-t))+t},learn(t){const i=this,o=this.book_map.length,e=Math.floor(o*t),a=this.book_map.filter((t=>!t.isHide&&t.isChar)).length;if(this.reset(),0!=a)if(a<=e)this.book_map.forEach((t=>{t.isChar&&(t.isHide=!0)}));else{const t=[];while(t.length<e){const i=this.random(0,o);this.book_map[i].isChar&&!this.book_map[i].isHide&&t.indexOf(i)<0&&t.push(i)}t.forEach((t=>{i.book_map[t].isHide=!0}))}},toggle(t){this.book_map[t].isHide=!this.book_map[t].isHide},complete(){this.book_map.forEach((t=>{t.isHide=!1}))},reset(){this.book_map.forEach((t=>{t.context=""}))}},mounted(){this.init()}},c=h,l=o(1),d=(0,l.Z)(c,e,a,!1,null,"e3547f36",null),p=d.exports}}]);
//# sourceMappingURL=460.a25c6089.js.map