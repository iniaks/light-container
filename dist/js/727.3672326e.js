"use strict";(self["webpackChunklight_container"]=self["webpackChunklight_container"]||[]).push([[727],{727:function(t,o,i){i.r(o),i.d(o,{default:function(){return p}});var e=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"reading-container"},[t.book?i("div",{staticClass:"reading-context"},[i("h2",[t._v(t._s(t.book.title))]),i("button",{staticStyle:{"margin-right":"10px"},on:{click:function(o){return t.learn(.1)}}},[t._v("学习")]),i("button",{on:{click:t.complete}},[t._v("全显")]),i("p",{staticClass:"reading-paragraph"},t._l(t.book_map,(function(o,e){return i("span",{key:"word-"+e,staticClass:"reading-word",style:{borderBottomColor:o.isHide?"#333":"transparent",display:o.isWrap?"block":"inline-block"},on:{click:function(o){return t.toggle(e)}}},[o.isWrap?t._e():i("span",{style:{opacity:o.isHide?"0":"1"}},[t._v(t._s(o.char))])])})),0)]):t._e()])},a=[],n=i(669),s=i.n(n),r=i(71),h={data(){return{book:null,book_map:[]}},methods:{generate(){const t=this;this.book.content.forEach(((o,i)=>{for(let e=0;e<o.length;e++)t.book_map.push({char:o[e],cindex:e,para:i,isChar:/[\u4E00-\u9FA5]/.test(o[e]),isWrap:!1,isHide:!1,context:""});t.book_map.push({char:"",cindex:o.length,para:i,isChar:!1,isWrap:!0,isHide:!1,context:""})}))},init(){const t=this;s().get(`${r.H}/reading/book?addr=${this.$route.query.addr}`).then((o=>{t.book=o.data,t.generate()})).catch((t=>t))},random(t,o){return Math.floor(Math.random()*(o-t))+t},learn(t){const o=this,i=this.book_map.length,e=Math.floor(i*t),a=this.book_map.filter((t=>!t.isHide&&t.isChar)).length;if(this.reset(),0!=a)if(a<=e)this.book_map.forEach((t=>{t.isChar&&(t.isHide=!0)}));else{const t=[];while(t.length<e){const o=this.random(0,i);this.book_map[o].isChar&&!this.book_map[o].isHide&&t.indexOf(o)<0&&t.push(o)}t.forEach((t=>{o.book_map[t].isHide=!0}))}},toggle(t){this.book_map[t].isHide=!this.book_map[t].isHide},complete(){this.book_map.forEach((t=>{t.isHide=!1}))},reset(){this.book_map.forEach((t=>{t.context=""}))}},mounted(){this.init()}},c=h,l=i(1),d=(0,l.Z)(c,e,a,!1,null,"11956979",null),p=d.exports}}]);
//# sourceMappingURL=727.3672326e.js.map