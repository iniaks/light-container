"use strict";(self["webpackChunklight_container"]=self["webpackChunklight_container"]||[]).push([[696,926],{926:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.letter?s("div",{staticClass:"letter-container",style:{display:t.letter&&t.letter.isWrap?"block":"inline-block"}},[t.letter.isHide?s("span",{staticClass:"letter-context",style:{borderColor:"#333",color:t.letter.context==t.letter.char||""==t.letter.context?"#333":"red"},on:{mousedown:t.active}},[t._v(" "+t._s(t.letter.context?t.letter.context:"?")+" ")]):s("span",{staticClass:"letter-context"},[t._v(t._s(t.letter.char))]),t.toggle?s("div",{staticClass:"disk-wrapper",on:{mouseup:t.complete}},[s("div",{staticClass:"disk-container"},[s("div",{staticClass:"disk-center"}),t._l(t.list,(function(t,e){return s("div",{key:"char-"+e,staticClass:"disk-item",style:{transform:"rotate("+45*e+"deg) skewX(45deg)"}})})),t._l(t.list,(function(e,i){return s("div",{key:"option-"+i,staticClass:"disk-item__option",style:{transform:"rotate("+(45*i+22.5)+"deg)"}},[s("div",{staticClass:"disk-item__option_text",style:{transform:"rotate("+(-45*i-22.5)+"deg)"}},[t._v(t._s(e))])])})),t._l(t.list,(function(e,i){return s("div",{key:"mask-"+i,staticClass:"disk-item mask",style:{transform:"rotate("+45*i+"deg) skewX(45deg)"},on:{mouseup:function(e){return t.choose(i)}}})}))],2)]):t._e()]):t._e()},o=[],a={props:["book","letter"],data(){return{toggle:!1,list:[]}},methods:{random(t,e){return Math.floor(Math.random()*(e-t))+t},generate(){this.list=[this.letter.char];const t=this.book.filter((t=>t.isHide)).map((t=>t.char));while(this.list.length<8){const e=this.random(0,t.length),s=t[e];this.list.indexOf(s)<0&&this.list.push(s)}this.shuffle()},shuffle(){const t=[];while(this.list.length>0){let e=Math.floor(Math.random()*this.list.length);t.push(this.list[e]),this.list.splice(e,1)}this.list=Object.assign([],t)},active(){this.list.length<=0&&this.generate(),this.toggle=!0},complete(){this.toggle=!1},choose(t){this.letter.context=this.list[t]}}},r=a,n=s(1),l=(0,n.Z)(r,i,o,!1,null,"b2ab7f22",null),h=l.exports},696:function(t,e,s){s.r(e),s.d(e,{default:function(){return p}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reading-container"},[t.book_map.length>0?s("div",{staticClass:"reading-context"},[s("h2",[t._v(t._s(t.book_title))]),s("button",{staticStyle:{"margin-right":"10px"},on:{click:function(e){return t.learn(.1)}}},[t._v("学习")]),s("button",{on:{click:t.complete}},[t._v("全显")]),s("br"),s("div",{staticClass:"reading-paragraph"},t._l(t.book_map,(function(e,i){return s("context-char",{key:"word-"+i,attrs:{letter:e,book:t.book_map}})})),1)]):t._e()])},o=[],a=s(669),r=s.n(a),n=s(71),l=s(926),h={components:{ContextChar:l["default"]},data(){return{book_title:"",book_map:[]}},methods:{generate(t){const e=this;t.forEach(((t,s)=>{for(let i=0;i<t.length;i++)e.book_map.push({char:t[i],cindex:i,para:s,isChar:/[\u4E00-\u9FA5]/.test(t[i]),isWrap:!1,isHide:!1,context:""});e.book_map.push({char:"",cindex:t.length,para:s,isChar:!1,isWrap:!0,isHide:!1,context:""})}))},init(){const t=this;r().get(`${n.H}/reading/book?addr=${this.$route.query.addr}`).then((e=>{t.book_title=e.data.title,t.generate(e.data.content)})).catch((t=>t))},random(t,e){return Math.floor(Math.random()*(e-t))+t},learn(t){const e=this,s=this.book_map.length,i=Math.floor(s*t),o=this.book_map.filter((t=>!t.isHide&&t.isChar)).length;if(this.reset(),0!=o)if(o<=i)this.book_map.forEach((t=>{t.isChar&&(t.isHide=!0)}));else{const t=[];while(t.length<i){const e=this.random(0,s);this.book_map[e].isChar&&!this.book_map[e].isHide&&t.indexOf(e)<0&&t.push(e)}t.forEach((t=>{e.book_map[t].isHide=!0}))}},toggle(t){this.book_map[t].isHide=!this.book_map[t].isHide},complete(){this.book_map.forEach((t=>{t.isHide=!1}))},reset(){this.book_map.forEach((t=>{t.context=""}))}},mounted(){this.init()}},c=h,d=s(1),u=(0,d.Z)(c,i,o,!1,null,"7241534f",null),p=u.exports}}]);
//# sourceMappingURL=696.7ab68206.js.map