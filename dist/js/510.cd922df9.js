"use strict";(self["webpackChunklight_container"]=self["webpackChunklight_container"]||[]).push([[510],{510:function(t,e,o){o.r(e),o.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"reading-container"},[t.book?o("div",{staticClass:"reading-context"},[o("h2",[t._v(t._s(t.book.title))]),o("button",{staticStyle:{"margin-right":"10px"},on:{click:function(e){return t.learn(.1)}}},[t._v("学习")]),o("button",{on:{click:t.complete}},[t._v("全显")]),o("p",{staticClass:"reading-paragraph"},t._l(t.book_map,(function(e,i){return o("span",{key:"word-"+i,staticClass:"reading-word",style:{borderBottomColor:e.isHide?"#333":"transparent",display:e.isWrap?"block":"inline-block"}},[e.isWrap?t._e():o("span",{style:{opacity:e.isHide?"0":"1"}},[t._v(t._s(e.char))]),e.isHide?o("input",{directives:[{name:"model",rawName:"v-model",value:e.context,expression:"item.context"}],staticClass:"reading-input",style:{color:e.char==e.context||""==e.context?"#333":"red"},domProps:{value:e.context},on:{input:function(o){o.target.composing||t.$set(e,"context",o.target.value)}}}):t._e(),e.isHide?o("span",{staticClass:"reading-toggle",on:{click:function(e){return t.toggle(i)}}}):t._e()])})),0)]):t._e()])},a=[],n=o(669),s=o.n(n),r=o(71),c={data(){return{book:null,book_map:[]}},methods:{generate(){const t=this;this.book.content.forEach(((e,o)=>{for(let i=0;i<e.length;i++)t.book_map.push({char:e[i],cindex:i,para:o,isChar:/[\u4E00-\u9FA5]/.test(e[i]),isWrap:!1,isHide:!1,context:""});t.book_map.push({char:"",cindex:e.length,para:o,isChar:!1,isWrap:!0,isHide:!1,context:""})}))},init(){const t=this;s().get(`${r.H}/reading/book?addr=${this.$route.query.addr}`).then((e=>{t.book=e.data,t.generate()})).catch((t=>t))},random(t,e){return Math.floor(Math.random()*(e-t))+t},learn(t){const e=this,o=this.book_map.length,i=Math.floor(o*t),a=this.book_map.filter((t=>!t.isHide&&t.isChar)).length;if(this.reset(),0!=a)if(a<=i)this.book_map.forEach((t=>{t.isChar&&(t.isHide=!0)}));else{const t=[];while(t.length<i){const e=this.random(0,o);this.book_map[e].isChar&&!this.book_map[e].isHide&&t.indexOf(e)<0&&t.push(e)}t.forEach((t=>{e.book_map[t].isHide=!0}))}},toggle(t){this.book_map[t].context=this.book_map[t].context==this.book_map[t].char?"":this.book_map[t].char},complete(){this.book_map.forEach((t=>{t.isHide=!1})),this.reset()},reset(){this.book_map.forEach((t=>{t.context=""}))}},mounted(){this.init()}},h=c,l=o(1),p=(0,l.Z)(h,i,a,!1,null,"101bb496",null),d=p.exports}}]);
//# sourceMappingURL=510.cd922df9.js.map