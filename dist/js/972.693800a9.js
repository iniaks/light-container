"use strict";(self["webpackChunklight_container"]=self["webpackChunklight_container"]||[]).push([[972],{335:function(t,e,n){n.r(e),n.d(e,{default:function(){return m}});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{cursor:"pointer","text-align":"center"}},[n("div",{staticClass:"btn",on:{click:t.next}},[t._v("next")]),n("div",{on:{click:t.load}},[t._v("加载pdf")]),n("div",{on:{click:t.save}},[t._v("保存年历")])]),n("table",{staticStyle:{width:"100%"}},t._l(t.contents,(function(e,s){return n("tr",{key:"line-"+s},t._l(e,(function(e,s){return n("td",{key:"char-"+s},[t._v(" "+t._s(e)+" ")])})),0)})),0)])},r=[],a=n(669),c=n.n(a),o=n(71);const i=window.pdfjsLib,l=window.pdfjsLib;i.GlobalWorkerOptions.workerSrc=l;const u=t=>new Promise((e=>setTimeout(e,t)));var p={data(){return{year:1984,diagrams:["鼎 29","恆 28","巽 27","井 26","蛊 25","升 24","讼 23","困 22","未济 21","解 20","涣 19","蒙 17","师 16","遁 15","咸 14","旅 13","小过 12","渐 11","蹇 10","艮 9","谦 8","否 7","萃 6","晋 5","豫 4","观 3","比 2","剥 1","复 32","颐 33","屯 34","益 35","震 36","噬嗑 37","随 38","无妄 39","明夷40","贲 41","既济 42","家人 43","丰 44","革 46","同人 47","临 48","损 49","节 50","中孚 51","归妹 52","睽 53","兑 54","履 55","泰 56","大畜 57","需 58","小畜 59","大壮 60","大有 61","夬 62","姤 31","大过 30"],contents:[],line:[],current:1,total:1}},methods:{next(){this.current++,this.load()},load(){const t=this,e=i.getDocument({url:"/calendar.pdf"});e.promise.then((e=>{this.total=parseInt(e._pdfInfo.numPages);const n=async()=>{const s=[],r=[],a=await e.getPage(t.current),c=await a.getTextContent();c.items.forEach((t=>{if(16==r.length){const t=r.splice(0,16);s.push(t)}""!=t.str.replace(/\s*/g,"")&&r.push(t.str)})),t.contents=s,t.save(s,t.total),t.current<t.total?(await u(5e3),t.current++,n()):console.log("finished")};n()}))},format(t){return{sequence:parseInt(t[0]),samsara:{hex:parseInt(t[2]),cycle:t[1]},emblem:parseInt(t[3]),session:{hex:parseInt(t[5]),cycle:t[4]},term:parseInt(t[6]),duty:parseInt(t[7]),fate:{hex:parseInt(t[9]),cycle:t[8]},epoch:{hex:parseInt(t[11]),cycle:t[10]},year:{hex:parseInt(t[13]),cycle:t[12]},gregorian:parseInt(t[14])}},update(t){c().post(`${o.H}/timeline`,t)},save(t){const e=this;console.info(this.current,this.total,t.length),t.forEach(((t,n)=>{if(n>0){const n=e.format(t);e.update(n)}}))}}},h=p,d=n(1),f=(0,d.Z)(h,s,r,!1,null,"88ae421a",null),m=f.exports}}]);
//# sourceMappingURL=972.693800a9.js.map