"use strict";(self["webpackChunklight_container"]=self["webpackChunklight_container"]||[]).push([[338,531],{531:function(t,e,i){i.r(e),i.d(e,{default:function(){return c}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.letter.isWrap?i("div"):i("div",{staticClass:"letter-container"},[t.letter.isHide?i("span",{staticClass:"letter-context",style:{borderColor:"#333",color:t.letter.context==t.letter.char||""==t.letter.context?"#333":"red"},on:{mousedown:t.active}},[t._v(" "+t._s(t.letter.context?t.letter.context:"?")+" ")]):i("span",{staticClass:"letter-context"},[t._v(t._s(t.letter.char))]),t.toggle&&t.letter.isHide?i("div",{staticClass:"disk-wrapper",on:{mouseup:t.complete}},[i("div",{staticClass:"disk-container"},[i("div",{staticClass:"disk-center"}),t._l(t.list,(function(t,e){return i("div",{key:"char-"+e,staticClass:"disk-item",style:{transform:"rotate("+45*e+"deg) skewX(45deg)"}})})),t._l(t.list,(function(e,s){return i("div",{key:"option-"+s,staticClass:"disk-item__option",style:{transform:"rotate("+(45*s+22.5)+"deg)"}},[i("div",{staticClass:"disk-item__option_text",style:{transform:"rotate("+(-45*s-22.5)+"deg)"}},[t._v(t._s(e))])])})),t._l(t.list,(function(e,s){return i("div",{key:"mask-"+s,staticClass:"disk-item mask",style:{transform:"rotate("+45*s+"deg) skewX(45deg)"},on:{mouseup:function(e){return t.choose(s)}}})}))],2)]):t._e()])},o=[],n={props:["book","letter"],data(){return{toggle:!1,list:[]}},methods:{random(t,e){return Math.floor(Math.random()*(e-t))+t},generate(){this.list=[this.letter.char];const t=this.book.filter((t=>t.isHide)).map((t=>t.char));while(this.list.length<8){const e=this.random(0,t.length),i=t[e];this.list.indexOf(i)<0&&this.list.push(i)}this.shuffle()},shuffle(){const t=[];while(this.list.length>0){let e=Math.floor(Math.random()*this.list.length);t.push(this.list[e]),this.list.splice(e,1)}this.list=Object.assign([],t)},active(){this.list.length<=0&&this.generate(),this.toggle=!0},complete(){this.toggle=!1},choose(t){this.letter.context=this.list[t],this.$emit("choose")}}},r=n,a=i(1),l=(0,a.Z)(r,s,o,!1,null,"6110b700",null),c=l.exports},338:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reading-container"},[t.book_map.length>0?i("div",{staticClass:"reading-context"},[i("h2",[t._v(t._s(t.book_title))]),i("div",{staticClass:"reading-opts"},[i("button",{on:{click:function(e){return t.learn(.1)}}},[t._v("青铜")]),i("button",{on:{click:function(e){return t.learn(.2)}}},[t._v("白银")]),i("button",{on:{click:function(e){return t.learn(.4)}}},[t._v("黄金")]),i("button",{on:{click:function(e){return t.learn(.6)}}},[t._v("白金")]),i("button",{on:{click:function(e){return t.learn(.8)}}},[t._v("钻石")]),i("button",{on:{click:function(e){return t.learn(1)}}},[t._v("大师")]),i("button",{on:{click:t.complete}},[t._v("全显")])]),i("br"),i("div",{staticClass:"reading-paragraph"},t._l(t.book_map,(function(e,s){return i("context-char",{key:"word-"+s,attrs:{letter:e,book:t.book_map},on:{choose:t.check}})})),1)]):t._e()])},o=[],n=i(669),r=i.n(n),a=i(71),l=i(531),c={components:{ContextChar:l["default"]},data(){return{book_title:"",book_map:[],startTime:null}},methods:{generate(t){const e=this;t.forEach(((t,i)=>{for(let s=0;s<t.length;s++)e.book_map.push({char:t[s],cindex:s,para:i,isChar:/[\u4E00-\u9FA5]/.test(t[s]),isWrap:!1,isHide:!1,context:""});e.book_map.push({char:"",cindex:t.length,para:i,isChar:!1,isWrap:!0,isHide:!1,context:""})}))},init(){const t=this;r().get(`${a.H}/reading/book?addr=${this.$route.query.addr}`).then((e=>{t.book_title=e.data.title,t.generate(e.data.content)})).catch((t=>t))},random(t,e){return Math.floor(Math.random()*(e-t))+t},learn(t){this.complete();const e=this,i=this.book_map.length,s=Math.floor(i*t),o=this.book_map.filter((t=>!t.isHide&&t.isChar)).length;if(this.reset(),0!=o)if(o<=s)this.book_map.forEach((t=>{t.isChar&&(t.isHide=!0)})),this.startTime=new Date;else{const t=[];while(t.length<s){const e=this.random(0,i);this.book_map[e].isChar&&!this.book_map[e].isHide&&t.indexOf(e)<0&&t.push(e)}t.forEach((t=>{e.book_map[t].isHide=!0})),this.startTime=new Date}},toggle(t){this.book_map[t].isHide=!this.book_map[t].isHide},complete(){this.book_map.forEach((t=>{t.isHide=!1}))},reset(){this.startTime=null,this.book_map.forEach((t=>{t.context=""}))},check(){const t=this.book_map.filter((t=>t.isHide&&(""==t.content||t.content!=t.char))).length;if(t<=0){const t=new Date;window.alert(`完成！耗时${(t.getTime()-this.startTime.getTime())/1e3}秒！`)}}},mounted(){this.init()}},h=c,d=i(1),u=(0,d.Z)(h,s,o,!1,null,"83ca7a8a",null),m=u.exports}}]);
//# sourceMappingURL=338.6d301c43.js.map