"use strict";(self["webpackChunklight_container"]=self["webpackChunklight_container"]||[]).push([[373],{373:function(t,e,n){n.r(e),n.d(e,{default:function(){return _}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-container"},[n("div",{staticClass:"lib-list",staticStyle:{flex:"1"}},[n("div",{staticClass:"book-list"},t._l(t.list,(function(e,r){return n("div",{key:"book-"+r,class:["book-list__item",e.urn==t.current_book?"active":""],on:{click:function(n){return t.browse(e.urn)}}},[t._v(" "+t._s(e.title)+" ")])})),0),n("div",{staticClass:"book-pagination"},t._l(t.total_page,(function(e){return n("span",{directives:[{name:"show",rawName:"v-show",value:e-t.current<10&&e-t.current>-10,expression:"page - current < 10 && page - current > -10"}],key:"page-"+e,class:["book-page",e==t.current?"active":""],on:{click:function(n){return t.view(e)}}},[t._v(" "+t._s(e)+" ")])})),0)]),n("div",{staticClass:"content-list",staticStyle:{flex:"2"}},t._l(t.contents,(function(e,r){return n("div",{key:"chapter-"+r,staticClass:"content-item"},["article"==e.type?n("div",{staticClass:"main-contents",on:{click:function(n){return t.read(e.urn)}}},[t._v(" "+t._s(e.name)+" ")]):n("div",[t._v(t._s(e.name))]),"chapter"==e.type?n("div",{staticClass:"sub-contents"},t._l(e.contents,(function(e,r){return n("div",{key:"article-"+r,on:{click:function(n){return t.read(e.urn)}}},[t._v(" "+t._s(e.name)+" ")])})),0):t._e()])})),0)])},s=[],i=n(669),o=n.n(i),c=n(71),a={data(){return{current:0,total_page:0,list:[],current_book:"",contents:[]}},methods:{init(t){const e=this;o().get(`${c.H}/reading/books?page=${t}`).then((t=>{e.total_page=t.data.total_page,e.list=t.data.list})).catch((t=>t))},view(t){this.current=t,this.init(this.current),this.sync()},browse(t){const e=this;this.current_book=t,this.contents=[],o().get(`${c.H}/reading/contents?urn=${t}`).then((t=>{e.contents=t.data.contents,e.sync()})).catch((t=>t))},sync(){this.current==this.$route.query.page&&this.current_book==this.$route.query.book||this.$router.push({name:"books",query:{page:this.current,book:this.current_book}})},read(t){window.open(`/reading?urn=${t}`)}},mounted(){this.current=this.$route.query.page?this.$route.query.page:1,this.init(this.current),this.$route.query.book&&(this.current_book=this.$route.query.book,this.browse(this.current_book))}},u=a,l=n(1),h=(0,l.Z)(u,r,s,!1,null,"e9bef620",null),_=h.exports}}]);
//# sourceMappingURL=373.4d0feb79.js.map