"use strict";(self["webpackChunklight_container"]=self["webpackChunklight_container"]||[]).push([[633],{633:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reading-container"},[t.book_map.length>0?i("div",{staticClass:"reading-context"},[i("h2",[t._v(t._s(t.book_title))]),i("button",{staticStyle:{"margin-right":"10px"},on:{click:function(e){return t.learn(.1)}}},[t._v("学习")]),i("button",{on:{click:t.complete}},[t._v("全显")]),i("br"),i("p",{staticClass:"reading-paragraph"},t._l(t.book_map,(function(e,a){return i("span",{key:"word-"+a,staticClass:"reading-word",style:{borderBottomColor:e.isHide?"#333":"transparent",display:e.isWrap?"block":"inline-block"}},[e.isWrap?t._e():i("span",{class:[e.isHide?"hide":""]},[t._v(t._s(e.char))])])})),0)]):t._e()])},o=[],s=i(669),n=i.n(s),r=i(71),h={data(){return{book_title:"",book_map:[]}},methods:{generate(t){const e=this;t.forEach(((t,i)=>{for(let a=0;a<t.length;a++)e.book_map.push({char:t[a],cindex:a,para:i,isChar:/[\u4E00-\u9FA5]/.test(t[a]),isWrap:!1,isHide:!1,context:""});e.book_map.push({char:"",cindex:t.length,para:i,isChar:!1,isWrap:!0,isHide:!1,context:""})}))},init(){const t=this;n().get(`${r.H}/reading/book?addr=${this.$route.query.addr}`).then((e=>{t.book_title=e.data.title,t.generate(e.data.content)})).catch((t=>t))},random(t,e){return Math.floor(Math.random()*(e-t))+t},learn(t){const e=this,i=this.book_map.length,a=Math.floor(i*t),o=this.book_map.filter((t=>!t.isHide&&t.isChar)).length;if(this.reset(),0!=o)if(o<=a)this.book_map.forEach((t=>{t.isChar&&(t.isHide=!0)}));else{const t=[];while(t.length<a){const e=this.random(0,i);this.book_map[e].isChar&&!this.book_map[e].isHide&&t.indexOf(e)<0&&t.push(e)}t.forEach((t=>{e.book_map[t].isHide=!0}))}},toggle(t){this.book_map[t].isHide=!this.book_map[t].isHide},complete(){this.book_map.forEach((t=>{t.isHide=!1}))},reset(){this.book_map.forEach((t=>{t.context=""}))}},mounted(){this.init()}},c=h,l=i(1),d=(0,l.Z)(c,a,o,!1,null,"e6184a08",null),p=d.exports}}]);
//# sourceMappingURL=633.8b1ce525.js.map